{"remainingRequest":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\eslint-loader\\index.js??ref--18-0!C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\src\\firebase_api.js","dependencies":[{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\src\\firebase_api.js","mtime":1528627987876},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\package.json","mtime":1525629842569},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1524914320676},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\babel-loader\\lib\\index.js","mtime":1519636541000},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\eslint-loader\\index.js","mtime":1519638534000}],"contextDependencies":[],"result":["import _typeof from \"C:\\\\Users\\\\Colinear\\\\Dropbox\\\\Workspace\\\\Web\\\\VueTutorial\\\\vue-skills\\\\node_modules\\\\@babel\\\\runtime/helpers/typeof\";\nimport firebase from 'firebase';\nvar config = {\n  apiKey: \"AIzaSyDOpoNcoeSWE8weaKuT8DvMWt2qSTok11k\",\n  authDomain: \"sostatic-1d381.firebaseapp.com\",\n  databaseURL: \"https://sostatic-1d381.firebaseio.com\",\n  projectId: \"sostatic-1d381\",\n  storageBucket: \"sostatic-1d381.appspot.com\",\n  messagingSenderId: \"446439468118\"\n};\nfirebase.initializeApp(config);\n\nfunction logout() {\n  firebase.auth().signOut().then(function () {\n    console.log('Signed Out');\n  }, function (error) {\n    console.error('Sign Out Error', error);\n  });\n}\n\nfunction register(user, pass, callback) {\n  firebase.auth().createUserWithEmailAndPassword(user, pass).catch(function (error) {\n    console.log(error);\n    callback(error);\n  });\n}\n\nfunction login(user, pass, callback) {\n  firebase.auth().signInWithEmailAndPassword(user, pass).catch(function (error) {\n    console.log(error);\n    callback(error);\n  });\n}\n\nfunction getWebsitesOfUser(callback) {\n  firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites').once('value').then(function (snapshot) {\n    callback(snapshotToArray(snapshot));\n  });\n}\n\nfunction getWebsitesById(id, callback) {\n  firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + id).once('value').then(function (snapshot) {\n    var website = snapshot.val();\n    website.key = snapshot.key;\n    callback(website);\n  });\n}\n\nfunction addWebsite(website, callback) {\n  website.messagesCount = 0;\n  website.formsCount = 0;\n  firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites').push(website).then(callback);\n}\n\nfunction addFormToWebsite(website_id, form, callback) {\n  form.added_on = firebase.database.ServerValue.TIMESTAMP;\n  form.message_count = 128; //don't worry if the keys are very similar.\n\n  var futureFormRef = firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + website_id + \"/forms\").push();\n  form.key = futureFormRef.key;\n  var endpointData = {\n    form: form.key,\n    website: website_id,\n    user: firebase.auth().currentUser.uid\n  };\n  var futureEndpointRef = firebase.database().ref('/endpoints').push();\n  form.endpoint = futureEndpointRef.key;\n  futureFormRef.set(form).then(function (snapshot) {\n    futureEndpointRef.set(endpointData).then(console.log);\n    callback(snapshot);\n  }); // let res = firebase.database().ref('/users/'+firebase.auth().currentUser.uid+'/websites/'+website_id+\"/forms\").push(form).then(callback);\n}\n\nfunction updateForm(websiteId, form_key, update_data, callback) {\n  firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + websiteId + \"/forms/\" + form_key).update(update_data, function (error) {}).then(function (snapshot) {\n    callback(snapshot);\n  });\n}\n\nexport { login, register, getWebsitesOfUser, addWebsite, logout, getWebsitesById, addFormToWebsite, updateForm };\n\nfunction snapshotToArray(snapshot) {\n  var returnArr = [];\n  console.log(_typeof(snapshot));\n  snapshot.forEach(function (childSnapshot) {\n    var item = childSnapshot.val();\n    item.key = childSnapshot.key;\n    returnArr.push(item);\n  });\n  return returnArr;\n}",{"version":3,"sources":["src\\firebase_api.js"],"names":["firebase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","initializeApp","logout","auth","signOut","then","console","log","error","register","user","pass","callback","createUserWithEmailAndPassword","catch","login","signInWithEmailAndPassword","getWebsitesOfUser","database","ref","currentUser","uid","once","snapshot","snapshotToArray","getWebsitesById","id","website","val","key","addWebsite","messagesCount","formsCount","push","addFormToWebsite","website_id","form","added_on","ServerValue","TIMESTAMP","message_count","futureFormRef","endpointData","futureEndpointRef","endpoint","set","updateForm","websiteId","form_key","update_data","update","returnArr","forEach","childSnapshot","item"],"mappings":"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","sourceRoot":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills","sourcesContent":["import firebase from 'firebase'\r\n\r\nlet config = {\r\n    apiKey: \"AIzaSyDOpoNcoeSWE8weaKuT8DvMWt2qSTok11k\",\r\n    authDomain: \"sostatic-1d381.firebaseapp.com\",\r\n    databaseURL: \"https://sostatic-1d381.firebaseio.com\",\r\n    projectId: \"sostatic-1d381\",\r\n    storageBucket: \"sostatic-1d381.appspot.com\",\r\n    messagingSenderId: \"446439468118\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\n\r\nfunction logout() {\r\n    firebase.auth().signOut().then(function () {\r\n        console.log('Signed Out');\r\n    }, function (error) {\r\n        console.error('Sign Out Error', error);\r\n    });\r\n}\r\n\r\n\r\nfunction register(user, pass, callback) {\r\n    firebase.auth().createUserWithEmailAndPassword(user, pass).catch(function (error) {\r\n        console.log(error);\r\n        callback(error);\r\n    });\r\n}\r\n\r\n\r\nfunction login(user, pass, callback) {\r\n    firebase.auth().signInWithEmailAndPassword(user, pass).catch(function (error) {\r\n        console.log(error);\r\n        callback(error)\r\n    });\r\n}\r\n\r\nfunction getWebsitesOfUser(callback) {\r\n    firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites').once('value').then(function (snapshot) {\r\n        callback(snapshotToArray(snapshot));\r\n    })\r\n}\r\n\r\nfunction getWebsitesById(id, callback) {\r\n    firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + id).once('value').then(function (snapshot) {\r\n        let website = snapshot.val();\r\n        website.key = snapshot.key;\r\n        callback(website);\r\n    })\r\n}\r\n\r\n\r\nfunction addWebsite(website, callback) {\r\n    website.messagesCount = 0;\r\n    website.formsCount = 0;\r\n    firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites').push(website).then(callback);\r\n}\r\n\r\n\r\nfunction addFormToWebsite(website_id, form, callback) {\r\n    form.added_on = firebase.database.ServerValue.TIMESTAMP;\r\n    form.message_count = 128;\r\n\r\n    //don't worry if the keys are very similar.\r\n\r\n    let futureFormRef = firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + website_id + \"/forms\").push();\r\n    form.key = futureFormRef.key;\r\n\r\n    let endpointData = {form: form.key, website: website_id, user: firebase.auth().currentUser.uid};\r\n    let futureEndpointRef = firebase.database().ref('/endpoints').push();\r\n\r\n    form.endpoint = futureEndpointRef.key;\r\n\r\n    futureFormRef.set(form).then((snapshot) => {\r\n        futureEndpointRef.set(endpointData).then(console.log);\r\n        callback(snapshot);\r\n    });\r\n\r\n    // let res = firebase.database().ref('/users/'+firebase.auth().currentUser.uid+'/websites/'+website_id+\"/forms\").push(form).then(callback);\r\n}\r\n\r\nfunction updateForm(websiteId, form_key, update_data, callback) {\r\n    firebase.database().ref('/users/' + firebase.auth().currentUser.uid + '/websites/' + websiteId + \"/forms/\" + form_key)\r\n        .update(update_data, function (error) {\r\n            \r\n        }).then(function (snapshot) {\r\n        callback(snapshot);\r\n    });\r\n}\r\n\r\n\r\nexport {login, register, getWebsitesOfUser, addWebsite, logout, getWebsitesById, addFormToWebsite, updateForm}\r\n\r\n\r\nfunction snapshotToArray(snapshot) {\r\n    let returnArr = [];\r\n\r\n    console.log(typeof snapshot);\r\n\r\n    snapshot.forEach(function (childSnapshot) {\r\n        let item = childSnapshot.val();\r\n        item.key = childSnapshot.key;\r\n\r\n\r\n        returnArr.push(item);\r\n    });\r\n\r\n    return returnArr;\r\n}"]}]}