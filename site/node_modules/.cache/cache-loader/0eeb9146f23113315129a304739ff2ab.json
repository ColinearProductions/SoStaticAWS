{"remainingRequest":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\vue-loader\\lib\\selector.js?type=script&index=0!C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\src\\App.vue","dependencies":[{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\src\\App.vue","mtime":1528630964796},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\package.json","mtime":1525629842569},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1524914320676},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\babel-loader\\lib\\index.js","mtime":1519636541000},{"path":"C:\\Users\\Colinear\\Dropbox\\Workspace\\Web\\VueTutorial\\vue-skills\\node_modules\\vue-loader\\lib\\selector.js","mtime":1520395331000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nimport MSnackBar from \"./components/TinyComponents/MSnackBar\";\nvar u = \"razvanule@gmail.com\";\nvar p = \"3718509654\";\nimport Layout from './components/Layout.vue';\nimport Loader from './components/TinyComponents/Loader';\nimport LandingPage from './components/LandingPage';\nimport Vue from 'vue';\nimport Vuex from \"vuex\";\nimport { EventBus } from './event_bus.js';\nimport * as api from './firebase_api';\nimport firebase from 'firebase';\nVue.use(Vuex);\nimport router from './router'; //api.logout();\n//api.login(u,p,alert);\n\nfirebase.auth().onAuthStateChanged(function (user) {\n  if (user) {\n    store.commit('setLoggedInState', true);\n    console.log('Logged in', user);\n    api.getWebsitesOfUser(function (snapshot) {\n      console.log('Websites count', snapshot.length);\n\n      if (snapshot.length < 1) {\n        router.push('/setup');\n        store.commit('setLoaderVisibility', false);\n      } else {\n        router.push('/app/forms');\n        store.commit('setInitialData', snapshot);\n        store.commit('setLoaderVisibility', false);\n      }\n    });\n  } else {\n    //user logged out\n    store.commit('setLoggedInState', false);\n    router.push('/');\n    store.commit('setLoaderVisibility', false);\n  }\n});\nvar store = new Vuex.Store({\n  state: {\n    currentWebsite: '0',\n    loaderVisible: true,\n    isLoggedIn: false,\n    isCreateWebsiteDialogVisible: false,\n    snackbarVisible: false,\n    snackbarText: '',\n    websitesData: [{\n      \"alias\": \"Loading\",\n      \"contacts\": [],\n      \"httpsOnly\": true,\n      \"owner\": \"\",\n      \"recaptcha\": false,\n      \"secret\": \"recaptcha secret\",\n      \"sitekey\": \"recaptcha sitekey\",\n      \"url\": \"loading\",\n      \"key\": \"\",\n      \"formsCount\": 1,\n      \"messagesCount\": 128,\n      \"formsPercentage\": 34,\n      \"messagesPercentage\": 7,\n      \"forms\": {}\n    }],\n    pendingModification: false\n  },\n  mutations: {\n    setInitialData: function setInitialData(state, payload) {\n      state.websitesData = payload;\n    },\n    setLoggedInState: function setLoggedInState(state, payload) {\n      state.isLoggedIn = payload;\n    },\n    updateCurrentWebsite: function updateCurrentWebsite(state, payload) {\n      console.log(state, payload);\n      state.currentWebsite = payload;\n      EventBus.$emit('currentWebsiteUpdated');\n    },\n    addWebsite: function addWebsite(state, website) {\n      state.websitesData.push(website);\n      state.currentWebsite = state.websitesData.indexOf(website);\n    },\n    setPendingModification: function setPendingModification(state, pendingModification) {\n      state.pendingModification = pendingModification;\n    },\n    setLoaderVisibility: function setLoaderVisibility(state, visible) {\n      state.loaderVisible = visible;\n    },\n    updateWebsiteData: function updateWebsiteData(state, website) {\n      for (var i = 0; i < state.websitesData.length; i++) {\n        var w = state.websitesData[i];\n        console.log('Update Website Data');\n        console.log(website, w, website.key === w.key);\n\n        if (website.key === w.key) {\n          Vue.set(state.websitesData, i, website);\n        }\n      }\n\n      state.loaderVisible = false;\n    },\n    setCreateWebsiteDialogVisibility: function setCreateWebsiteDialogVisibility(state, visiblility) {\n      state.isCreateWebsiteDialogVisible = visiblility;\n    },\n    updateFormById: function updateFormById(state, payload) {\n      console.log(\"Trying to update local version of form\", payload);\n      var newAlias = payload.alias;\n      var recaptcha = payload.recaptcha;\n      var formId = payload.form_id;\n      console.log(state.websitesData[state.currentWebsite].forms[formId]);\n      state.websitesData[state.currentWebsite].forms[formId].alias = newAlias;\n      state.websitesData[state.currentWebsite].forms[formId].recaptcha = recaptcha;\n      state.loaderVisible = false;\n    },\n    showSnackbar: function showSnackbar(state, text) {\n      state.snackbarText = text;\n      state.snackbarVisible = true;\n    },\n    hideSnackbar: function hideSnackbar(state) {\n      state.snackbarText = '';\n      state.snackbarVisible = false;\n    }\n  },\n  getters: {\n    currentWebsiteClone: function currentWebsiteClone(state) {\n      console.log(state.websitesData[state.currentWebsite]);\n      return JSON.parse(JSON.stringify(state.websitesData[state.currentWebsite]));\n    },\n    currentWebsite: function currentWebsite(state) {\n      return state.websitesData[state.currentWebsite];\n    },\n    getPendingModification: function getPendingModification(state) {\n      return state.pendingModification;\n    },\n    getLoaderVisible: function getLoaderVisible(state) {\n      return state.loaderVisible;\n    },\n    getIsCreateWebsiteDialogVisible: function getIsCreateWebsiteDialogVisible(state) {\n      return state.isCreateWebsiteDialogVisible;\n    },\n    getIsLoggedIn: function getIsLoggedIn(state) {\n      return state.isLoggedIn;\n    },\n    getSnackbarVisible: function getSnackbarVisible(state) {\n      return state.snackbarVisible;\n    },\n    getSnackbarText: function getSnackbarText(state) {\n      return state.snackbarText;\n    }\n  },\n  actions: {\n    createWebsite: function createWebsite(context, website) {\n      context.commit('setLoaderVisibility', true);\n      console.log(website);\n      api.addWebsite(website, function (snapshot) {\n        console.log(snapshot);\n        var newWebsiteKey = snapshot.key;\n        api.getWebsitesById(newWebsiteKey, function (snapshot) {\n          console.log(\"api.getWebsitesById(newWebsiteKey, function(snapshot)\", snapshot);\n          context.commit('addWebsite', snapshot);\n          context.commit('setLoaderVisibility', false);\n          router.push('/app/settings');\n        });\n      });\n    },\n    addFormToWebsite: function addFormToWebsite(context, form) {\n      context.commit('setLoaderVisibility', true);\n      var current_website_key = context.getters.currentWebsite.key;\n      api.addFormToWebsite(current_website_key, form, function (snapshot) {\n        console.log(snapshot);\n        api.getWebsitesById(current_website_key, function (snapshot) {\n          console.log(snapshot);\n          context.commit('updateWebsiteData', snapshot);\n          context.commit('showSnackbar', 'Form ' + form.alias + ' successfully');\n        });\n      });\n    },\n    updateWebsite: function updateWebsite(context, website) {\n      console.log(website);\n    },\n    updateForm: function updateForm(context, data) {\n      context.commit('setLoaderVisibility', true);\n      var updateData = {\n        alias: data.alias,\n        recaptcha: data.recaptcha\n      };\n      var form_key = data.form_id;\n      var current_website_key = context.getters.currentWebsite.key;\n      api.updateForm(current_website_key, form_key, updateData, function () {\n        context.commit('updateFormById', data);\n      });\n    }\n  }\n});\nexport default {\n  name: 'app',\n  components: {\n    MSnackBar: MSnackBar,\n    Layout: Layout,\n    Loader: Loader,\n    LandingPage: LandingPage\n  },\n  store: store\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,+BAGA;AACA;;AACA,mDAGA;YACA;qCAEA;6BACA;8CAEA;6CACA;;+BACA;oBACA;4CACA;aACA;oBAGA;uCACA;4CACA;AAGA;AACA;SACA;AACA;qCACA;gBACA;wCAEA;AACA;;AAGA;;oBAGA;mBACA;gBACA;kCACA;qBACA;kBACA;;eAEA;kBACA;mBACA;eACA;mBACA;gBACA;iBACA;aACA;aACA;oBACA;uBACA;yBACA;4BACA;eACA,AACA;AAfA;yBAiBA,AACA;AAzBA;;4DA2BA;2BACA;AACA;gEACA;yBACA;AACA;wEACA;yBACA;6BACA;qBACA;AACA;oDACA;8BACA;wDAGA;AACA;wFACA;kCACA;AACA;sEACA;4BACA;AACA;kEACA;0DACA;mCACA;oBACA;kDACA;;mCACA;yCACA;AAGA;AACA;;4BACA;AACA;oGACA;2CACA;AACA;4DACA;4DACA;6BACA;8BACA;2BAEA;iEACA;qEACA;yEACA;4BAGA;AACA;qDACA;2BACA;8BACA;AACA;+CACA;2BACA;8BACA;AAEA,AACA;AA9DA;;6DAgEA;2CACA;gEACA;AACA;mDACA;sCACA;AACA;mEACA;mBACA;AACA;uDACA;mBACA;AACA;qFACA;mBACA;AACA;iDACA;mBACA;AACA;2DACA;mBACA;AACA;qDACA;mBACA;AAGA,AACA;AA5BA;;4DA8BA;4CACA;kBACA;kDACA;oBACA;qCACA;+DACA;+EACA;uCACA;gDACA;sBACA;AACA;AACA;AACA;+DACA;4CACA;+DAEA;0EACA;oBAEA;qEACA;sBACA;8CACA;gEAGA;AACA;AACA;AACA;4DACA;kBACA;AACA;mDACA;4CACA;;;wBAEA;;0BACA;+DAEA;4EACA;yCAEA;AACA;AAEA,AACA;AA/CA;AAvHA;AAwKA;QAEA;;AAEA;;;AACA,AACA;AAHA;AAIA;AANA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n    <div id=\"app\">\n\n\n        <Loader></Loader>\n        <router-view></router-view>\n        <MSnackBar></MSnackBar>\n    </div>\n</template>\n\n<script>\n    /* eslint-disable */\n    import MSnackBar from \"./components/TinyComponents/MSnackBar\";\n\n    const u = \"razvanule@gmail.com\";\n    const p = \"3718509654\";\n\n    import Layout from './components/Layout.vue'\n    import Loader from './components/TinyComponents/Loader'\n    import LandingPage from './components/LandingPage'\n    import Vue from 'vue'\n    import Vuex from \"vuex\";\n    import {EventBus} from './event_bus.js';\n    import * as api from './firebase_api';\n    import firebase from 'firebase';\n\n    Vue.use(Vuex);\n\n    import router from './router'\n\n\n    //api.logout();\n    //api.login(u,p,alert);\n    firebase.auth().onAuthStateChanged(function (user) {\n\n\n        if (user) {\n            store.commit('setLoggedInState', true);\n\n            console.log('Logged in', user);\n            api.getWebsitesOfUser((snapshot) => {\n\n                console.log('Websites count', snapshot.length);\n                if (snapshot.length < 1) {\n                    router.push('/setup');\n                    store.commit('setLoaderVisibility', false)\n                } else {\n                    router.push('/app/forms');\n\n\n                    store.commit('setInitialData', snapshot);\n                    store.commit('setLoaderVisibility', false)\n                }\n\n\n            });\n        } else {\n            //user logged out\n            store.commit('setLoggedInState', false);\n            router.push('/');\n            store.commit('setLoaderVisibility', false)\n\n        }\n    });\n\n\n    const store = new Vuex.Store({\n        state: {\n            currentWebsite: '0',\n            loaderVisible: true,\n            isLoggedIn: false,\n            isCreateWebsiteDialogVisible: false,\n            snackbarVisible: false,\n            snackbarText: '',\n            websitesData: [{\n                \"alias\": \"Loading\",\n                \"contacts\": [],\n                \"httpsOnly\": true,\n                \"owner\": \"\",\n                \"recaptcha\": false,\n                \"secret\": \"recaptcha secret\",\n                \"sitekey\": \"recaptcha sitekey\",\n                \"url\": \"loading\",\n                \"key\": \"\",\n                \"formsCount\": 1,\n                \"messagesCount\": 128,\n                \"formsPercentage\": 34,\n                \"messagesPercentage\": 7,\n                \"forms\": {}\n            }],\n            pendingModification: false\n\n        },\n        mutations: {\n            setInitialData(state, payload) {\n                state.websitesData = payload\n            },\n            setLoggedInState(state, payload) {\n                state.isLoggedIn = payload\n            },\n            updateCurrentWebsite(state, payload) {\n                console.log(state, payload);\n                state.currentWebsite = payload;\n                EventBus.$emit('currentWebsiteUpdated');\n            },\n            addWebsite(state, website) {\n                state.websitesData.push(website);\n                state.currentWebsite = state.websitesData.indexOf(website);\n\n\n            },\n            setPendingModification(state, pendingModification) {\n                state.pendingModification = pendingModification;\n            },\n            setLoaderVisibility(state, visible) {\n                state.loaderVisible = visible;\n            },\n            updateWebsiteData(state, website) {\n                for (let i = 0; i < state.websitesData.length; i++) {\n                    let w = state.websitesData[i];\n                    console.log('Update Website Data');\n                    console.log(website, w, website.key === w.key);\n                    if (website.key === w.key) {\n                        Vue.set(state.websitesData, i, website);\n                    }\n\n\n                }\n                state.loaderVisible = false;\n            },\n            setCreateWebsiteDialogVisibility(state, visiblility) {\n                state.isCreateWebsiteDialogVisible = visiblility\n            },\n            updateFormById(state, payload) {\n                console.log(\"Trying to update local version of form\", payload);\n                let newAlias = payload.alias;\n                let recaptcha = payload.recaptcha;\n                let formId = payload.form_id;\n\n                console.log(state.websitesData[state.currentWebsite].forms[formId]);\n                state.websitesData[state.currentWebsite].forms[formId].alias = newAlias;\n                state.websitesData[state.currentWebsite].forms[formId].recaptcha = recaptcha;\n                state.loaderVisible = false;\n\n\n            },\n            showSnackbar(state, text) {\n                state.snackbarText = text;\n                state.snackbarVisible = true;\n            },\n            hideSnackbar(state) {\n                state.snackbarText = '';\n                state.snackbarVisible = false;\n            }\n\n        },\n        getters: {\n            currentWebsiteClone: function (state) {\n                console.log(state.websitesData[state.currentWebsite]);\n                return JSON.parse(JSON.stringify(state.websitesData[state.currentWebsite]));\n            },\n            currentWebsite: function (state) {\n                return state.websitesData[state.currentWebsite];\n            },\n            getPendingModification(state) {\n                return state.pendingModification;\n            },\n            getLoaderVisible(state) {\n                return state.loaderVisible;\n            },\n            getIsCreateWebsiteDialogVisible(state) {\n                return state.isCreateWebsiteDialogVisible;\n            },\n            getIsLoggedIn(state) {\n                return state.isLoggedIn\n            },\n            getSnackbarVisible(state) {\n                return state.snackbarVisible;\n            },\n            getSnackbarText(state) {\n                return state.snackbarText;\n            }\n\n\n        },\n        actions: {\n            createWebsite(context, website) {\n                context.commit('setLoaderVisibility', true);\n                console.log(website);\n                api.addWebsite(website, function (snapshot) {\n                    console.log(snapshot);\n                    let newWebsiteKey = snapshot.key;\n                    api.getWebsitesById(newWebsiteKey, function (snapshot) {\n                        console.log(\"api.getWebsitesById(newWebsiteKey, function(snapshot)\", snapshot);\n                        context.commit('addWebsite', snapshot);\n                        context.commit('setLoaderVisibility', false);\n                        router.push('/app/settings');\n                    })\n                })\n            },\n            addFormToWebsite(context, form) {\n                context.commit('setLoaderVisibility', true);\n                let current_website_key = context.getters.currentWebsite.key;\n\n                api.addFormToWebsite(current_website_key, form, function (snapshot) {\n                    console.log(snapshot);\n\n                    api.getWebsitesById(current_website_key, function (snapshot) {\n                        console.log(snapshot);\n                        context.commit('updateWebsiteData', snapshot);\n                        context.commit('showSnackbar', 'Form ' + form.alias + ' successfully');\n\n\n                    })\n                })\n            },\n            updateWebsite(context, website) {\n                console.log(website);\n            },\n            updateForm(context, data) {\n                context.commit('setLoaderVisibility', true);\n                let updateData = {alias: data.alias, recaptcha: data.recaptcha};\n\n                let form_key = data.form_id;\n                let current_website_key = context.getters.currentWebsite.key;\n\n                api.updateForm(current_website_key, form_key, updateData, function () {\n                    context.commit('updateFormById', data);\n\n                });\n            }\n\n        }\n    });\n\n    export default {\n        name: 'app',\n        components: {\n            MSnackBar,\n            Layout, Loader, LandingPage\n        },\n        store\n    }\n</script>\n\n<style>\n\n</style>\n"]}]}